 <body>
  <form
    [formGroup]="freelancer"
    ngClass="container"
    (ngSubmit)="addFreelancer(freelancer.value)"
  >
    <h2>{{formName}}</h2>
      <mat-form-field appearance="fill" class="example-full-width" *ngIf="editable">
        <mat-label>Id</mat-label>
        
        <input
          type="text"
          matInput
          formControlName="_id"
          [readonly]="editable"
        />
        <div *ngIf="freelancer.controls['_id']?.invalid && freelancer.controls['_id']?.touched" [ngClass]="'errorClass'">
          <p *ngIf="freelancer.controls['_id']?.errors?.['required']">Id required</p>
        </div>
      </mat-form-field>

      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Name</mat-label>
        <input
          type="text"
          matInput
          formControlName="name"
        />
        <div *ngIf="freelancer.controls['name']?.invalid && freelancer.controls['name']?.touched" [ngClass]="'errorClass'">
          <p *ngIf="freelancer.controls['name']?.errors?.['required']">name required</p>
          <p *ngIf="freelancer.controls['name']?.errors?.['maxlength']">length upto 20 only</p>
        </div>
      </mat-form-field>
      <br />
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>User Name</mat-label>
        <input
          type="text"
          matInput
          formControlName="userName"
          
        />
        <div *ngIf="freelancer.controls['userName']?.invalid && freelancer.controls['userName']?.touched" [ngClass]="'errorClass'">
          <p *ngIf="freelancer.controls['userName']?.errors?.['required']">userName required</p>
          <p *ngIf="freelancer.controls['userName']?.errors?.['maxlength']">length upto 20 only</p>
        </div>
      </mat-form-field>
      <br />
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>email</mat-label>
        <input
          type="email"
          matInput
          formControlName="email"
          
        />
        <div *ngIf="freelancer.controls['email']?.invalid && freelancer.controls['email']?.touched" [ngClass]="'errorClass'">
          <p *ngIf="freelancer.controls['email']?.errors?.['required']">email required</p>
          <p *ngIf="freelancer.controls['email']?.errors?.['email']">use correct email</p>
        </div>
      </mat-form-field>
      <br />
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Mobile</mat-label>
        <input
          type="number"
          matInput
          formControlName="mobile"
         
        />
        <div *ngIf="freelancer.controls['mobile']?.invalid && freelancer.controls['mobile']?.touched" [ngClass]="'errorClass'">
          <p *ngIf="freelancer.controls['mobile']?.errors?.['required']">information required</p>
        </div>
      </mat-form-field>
      <fieldset >
        <legend>Gender</legend>
        <mat-radio-group matInput formControlName="gender">
          <mat-radio-button class="example-margin" value="male" name="gender"
            >Male</mat-radio-button
          ><span></span>
          <mat-radio-button class="example-margin" value="female" name="gender"
            >Female</mat-radio-button
          >
        </mat-radio-group>
        <div *ngIf="freelancer.controls['gender']?.invalid && freelancer.controls['gender']?.touched" [ngClass]="'errorClass'">
          <p *ngIf="freelancer.controls['gender']?.errors?.['required']">information required</p>
        </div>
      </fieldset>
      <br />

      <fieldset>
        <legend>Address</legend>
        <div formGroupName="address">
                <mat-form-field class="example-full-width">
                  <mat-label>City</mat-label>
                  <input
                    matInput
                    placeholder="Ex.Hyderabad"
                    formControlName="city"
                    
                  />
                </mat-form-field>
                <mat-form-field class="example-full-width">
                  <mat-label>State</mat-label>
                  <input
                    matInput
                    placeholder="Ex.Telangana"
                    formControlName="state"
                    
                  />
                </mat-form-field>
             
                <mat-form-field class="example-full-width">
                  <mat-label>Country</mat-label>
                  <input
                    matInput
                    placeholder="Ex. India"
                    formControlName="country"
                    
                  />
                </mat-form-field>
             
                <mat-form-field class="example-full-width">
                  <mat-label>Postal Code</mat-label>
                  <input
                    matInput
                    #postalCode
                    maxlength="6"
                    placeholder="Ex. 941056"
                    formControlName="zip"
                    
                  />
                 
                  <mat-hint align="end"
                    >{{ postalCode.value.length }} / 6</mat-hint
                  >
                  <div *ngIf="freelancer.controls['zip']?.invalid && freelancer.controls['zip']?.touched" [ngClass]="'errorClass'">
                    <p *ngIf="freelancer.controls['zip']?.errors?.['required']">Please fill out this field*</p>
                  </div>
                </mat-form-field>
             
        </div>
      </fieldset>
      <mat-form-field appearance="fill">
        <mat-select matInput multiple formControlName="skills">
          <mat-option (click)="resetSkill()">-- None --</mat-option>
          <mat-option
            *ngFor="let skill of skills"
            value="{{ skill }}"
            >{{ skill }}</mat-option
          >
        </mat-select>
        
        <mat-label>Select Skills</mat-label>
      </mat-form-field>

      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Working hours per Week</mat-label>
        <input
          type="number"
          matInput
          formControlName="hoursPerWeek"
          
        />
      </mat-form-field>
      <br />
      <fieldset>
        <legend >Rating</legend>        
        <mat-slider
            #rating
            aria-label="unit(s)"
            thumbLabel="true"
            step="0.5"
            min="0"
            max="5"
            matInput
            formControlName="rating">
        </mat-slider>{{rating.value}}
        <div *ngIf="freelancer.controls['rating']?.invalid && freelancer.controls['rating']?.touched" [ngClass]="'errorClass'">
          <p *ngIf="freelancer.controls['rating']?.errors?.['required']">Please fill out this field*</p>
          <p *ngIf="freelancer.controls['rating']?.errors?.['min']">more than or equal 0</p>
          <p *ngIf="freelancer.controls['rating']?.errors?.['max']">less than 5</p>
        </div>
      </fieldset>
     
      <br />
      <mat-form-field appearance="fill">
        <mat-select required matInput formControlName="talentQuality">
          <mat-option >-- None --</mat-option>
          <mat-option  value="Top rated"
            >Top Rated</mat-option
          >
          <mat-option  value="Top rated Plus"
            >Top Rated +</mat-option
          >
        </mat-select>
        <mat-label>Select Proficiency</mat-label>
      </mat-form-field>
      <br />
      <mat-form-field appearance="fill">
        <mat-select matInput multiple formControlName="category">
          <mat-option (click)="resetCategory()">-- None --</mat-option>
          <mat-option
            *ngFor="let categoroy of categoriess"
            value="{{ categoroy }}"
            >{{ categoroy }}</mat-option
          >
        </mat-select>
        <mat-label>Select category</mat-label>
      </mat-form-field>
      <br />
      <fieldset >
        <legend>Availability</legend>
        <mat-radio-group matInput formControlName="availableBadge">
          <mat-radio-button
            class="example-margin"
            [value]="true"
            name="available"
            >Available</mat-radio-button
          ><span></span>
          <mat-radio-button
            class="example-margin"
            [value]="false"
            name="available"
            >Not Available</mat-radio-button
          >
        </mat-radio-group>
      </fieldset>
      <br />

      <mat-form-field appearance="fill">
        <mat-select required matInput multiple formControlName="languages">
          <mat-option (click)="resetLanguage()">-- None --</mat-option>
          <mat-option
            *ngFor="let language of languages"
            value="{{ language }}"
      
            >{{ language }}</mat-option
          >
        </mat-select>
        <mat-label>Select Language</mat-label>
      </mat-form-field>
      <br />
     
      <fieldset>
        <legend>Jobs Completed</legend>
        <mat-slider
        #percentage
        aria-label="unit(s)"
        thumbLabel="true"
        step="5"
        min="0"
        max="100"
        matInput
        formControlName="jobsCompleted">
    </mat-slider>{{percentage.value}}%
      </fieldset>
      <br />
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Joined date</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          [max]="maxDate"
          formControlName="joinedDate"
          
          
        />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <br />

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Price Per Hour</mat-label>
        <input
          type="number"
          matInput
          placeholder="$100"
          formControlName="pricePerHour"
          
        />
        <span matSuffix>$</span>
      </mat-form-field>
      <br />
      <fieldset>
        <legend>Certificate</legend>
        <div>
          <div
            formArrayName="certificates"
            *ngFor="let certificate of certificates.controls; let i = index"
          >
            <div [formGroupName]="i" class="formArray-div">
              <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>Course Name</mat-label>
                <input
                  type="text"
                  matInput
                  placeholder="Ex. It makes me feel..."
                  formControlName="course"
                  
                />
              </mat-form-field>

              <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>duration</mat-label>
                <input
                  type="number"
                  matInput
                  placeholder="Ex. It makes me feel..."
                  formControlName="duration"
                  
                />
                <span matSuffix>Months</span>
              </mat-form-field>

              <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>Provider</mat-label>
                <input
                  type="text"
                  matInput
                  placeholder="Ex. It makes me feel..."
                  formControlName="provider"
                  
                />
              </mat-form-field>
            
              
                <button
                  class="formArray-button"
                  mat-button 
                  (click)="deleteCertificate(i)">
                  <mat-icon>remove</mat-icon>
                </button>
                <hr>
            </div>
          </div>
        </div>
        
        <button
          type="button"
          mat-button
          color="primary"
          (click)="addCertificateButton()"
        >
          <mat-icon>add_circle_outline</mat-icon>
        </button>
      </fieldset>
      <fieldset>
        <legend>Experience</legend>

        <div
          formArrayName="experiences"
          *ngFor="let experience of experiences.controls; let i = index"
        >
          <div [formGroupName]="i">
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Company Name</mat-label>
              <input
                type="text"
                matInput
                placeholder="Ex. It makes me feel..."
                formControlName="companyName"
              />
            </mat-form-field>

            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Role</mat-label>
              <input
                type="text"
                matInput
                placeholder="Ex. It makes me feel..."
                formControlName="role"
                
              />
            </mat-form-field>
            <br />
            <mat-form-field appearance="fill">
              <mat-label>Start date</mat-label>
              <input
                matInput
                [matDatepicker]="startDate"
                formControlName="startDate"
                [max]="maxDate"
              />
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle
                matSuffix
                
                [for]="startDate"
              ></mat-datepicker-toggle>
              <mat-datepicker #startDate></mat-datepicker>
            </mat-form-field>
            <br />
            <mat-form-field appearance="fill">
              <mat-label>End date</mat-label>
              <input
                matInput
                [matDatepicker]="endDate"
                [max]="maxDate"
                formControlName="endDate"
              />
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle
                matSuffix
                [for]="endDate"
              ></mat-datepicker-toggle>
              <mat-datepicker  #endDate></mat-datepicker>
            </mat-form-field>
            <button
                  class="formArray-button"
                  mat-button 
                  (click)="deleteExperience(i)">
                  <mat-icon>remove</mat-icon>
                </button>
                <hr>
          </div>
        </div>
        
        <button
          type="button"
          mat-button
          color="primary"
          (click)="addExperienceButton()"
        >
          <mat-icon>add_circle_outline</mat-icon>
        </button>
      </fieldset>
        <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Describe your self</mat-label>
            <textarea matInput placeholder="Ex. It makes me feel..." formControlName="description"
            ></textarea>
          </mat-form-field>
      <button
        mat-button
        [ngClass]="'button'"
        *ngIf="roles.includes('manager') || roles.includes('editor')"
        [disabled]="!freelancer.valid"
      >
        Save
      </button>
      <span class="example-spacer"></span>
      <button
        *ngIf="roles.includes('manager')"
        type="button"
        mat-button
        color="primary"
        [ngClass]="'button'"
        (click)="resetDetails()"
      >
       RESET
      </button>
   
  </form>
</body>


<ng-template #success>
  <mat-dialog-content>
    <mat-icon [ngClass]="'success'">done_outline</mat-icon> Success
  </mat-dialog-content>
  <mat-dialog-actions>
    <button
      mat-button
      matDialogClose
      color="primary"
      (click)="reload()"
      >
      Dismiss
    </button>
  </mat-dialog-actions>
</ng-template>

<ng-template #failure>
  <mat-dialog-content>
    <mat-icon [ngClass]="'failure'">clear</mat-icon> Failed
  </mat-dialog-content>
  <mat-dialog-actions>
    <button
      mat-button
      matDialogClose
      color="primary"
      >
      Dismiss
    </button>
  </mat-dialog-actions>
</ng-template> 


